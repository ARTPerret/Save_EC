[gd_scene load_steps=12 format=4 uid="uid://qmadlfp31trp"]

[ext_resource type="Script" uid="uid://cf8lmues6tq0y" path="res://Scripts/Maps/map_setup.gd" id="1_tskkq"]
[ext_resource type="Texture2D" uid="uid://csbb1b36ogu1p" path="res://Graphics/Tilesets/City_Terrains.png" id="4_8keua"]
[ext_resource type="Script" uid="uid://blsvncors5gad" path="res://Scripts/Events/cutscenes.gd" id="4_a3cje"]
[ext_resource type="Script" uid="uid://df0d0ft4f664q" path="res://Scripts/Pawn/Types/PNJ/PNJ_Mobile/pnj_mobile_manager.gd" id="6_grxwr"]
[ext_resource type="PackedScene" uid="uid://wrsox72avo62" path="res://Scenes/Pawn/PNJ/pnj_immobile.tscn" id="6_uufvl"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_uufvl"]
vertices = PackedVector2Array(112, 192, 320, 240, 0, 240, 96, 192, 224, 80, 224, 64, 320, 0, 0, 0, 208, 64, 192, 64, 176, 64, 160, 64, 144, 64, 128, 64, 96, 176, 96, 160, 96, 144, 128, 80, 112, 144, 144, 80, 144, 96, 208, 96, 208, 80, 112, 176, 192, 96, 112, 160, 176, 96, 160, 96)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 1), PackedInt32Array(7, 6, 5, 8), PackedInt32Array(7, 8, 9), PackedInt32Array(7, 9, 10), PackedInt32Array(7, 10, 11), PackedInt32Array(7, 11, 12), PackedInt32Array(7, 12, 13), PackedInt32Array(3, 2, 7, 14), PackedInt32Array(15, 14, 7), PackedInt32Array(16, 15, 7), PackedInt32Array(16, 7, 13, 17, 18), PackedInt32Array(17, 19, 20, 18), PackedInt32Array(21, 22, 4, 1), PackedInt32Array(21, 1, 0, 23, 24), PackedInt32Array(24, 23, 25, 26), PackedInt32Array(26, 25, 18, 27), PackedInt32Array(27, 18, 20)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, 0, 320, 0, 320, 240, 0, 240)])
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_kpyvj"]
texture = ExtResource("4_8keua")
15:10/0 = 0
10:6/0 = 0
10:6/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
41:0/0 = 0

[sub_resource type="TileSet" id="TileSet_dya6d"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_kpyvj")

[sub_resource type="Animation" id="Animation_uufvl"]
length = 0.001

[sub_resource type="Animation" id="Animation_dwvx3"]
resource_name = "cutscene_1"
length = 4.0
step = 0.5
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1, 2, 4),
"transitions": PackedFloat32Array(1, 1, 1),
"values": [{
"args": [Vector2(290, 193)],
"method": &"move_player"
}, {
"args": ["dial_test2", 2],
"method": &"cutscene_dialogue"
}, {
"args": ["dial_test2", 3],
"method": &"cutscene_dialogue"
}]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../PNJ_Immobile")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(1.5),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [Vector2(50, 50)],
"method": &"set_movement_target"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_uufvl"]
_data = {
&"RESET": SubResource("Animation_uufvl"),
&"cutscene_1": SubResource("Animation_dwvx3")
}

[node name="Debug2" type="Node2D"]
script = ExtResource("1_tskkq")
limit_left = -100
limit_right = 500
limit_top = -100
limit_bottom = 500

[node name="StartPoints" type="Node2D" parent="."]

[node name="0_Baththub" type="Marker2D" parent="StartPoints"]
z_index = 50
position = Vector2(129, 134)
gizmo_extents = 30.0

[node name="1_RightCube" type="Marker2D" parent="StartPoints"]
z_index = 50
position = Vector2(290, 193)
gizmo_extents = 30.0

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_uufvl")

[node name="TileMapLayer" type="TileMapLayer" parent="NavigationRegion2D"]
tile_map_data = PackedByteArray("AAAAAAAAAAApAAAAAAABAAAAAAApAAAAAAACAAAAAAApAAAAAAADAAAAAAApAAAAAAAEAAAAAAApAAAAAAAFAAAAAAApAAAAAAAGAAAAAAApAAAAAAAHAAAAAAApAAAAAAAIAAAAAAApAAAAAAAJAAAAAAApAAAAAAAJAAEAAAApAAAAAAAJAAIAAAApAAAAAAAIAAIAAAApAAAAAAAHAAIAAAApAAAAAAAGAAIAAAApAAAAAAAFAAIAAAApAAAAAAAGAAEAAAApAAAAAAAHAAEAAAApAAAAAAAGAAMAAAApAAAAAAAFAAMAAAApAAAAAAAEAAMAAAApAAAAAAADAAMAAAApAAAAAAACAAMAAAApAAAAAAACAAIAAAApAAAAAAADAAIAAAApAAAAAAAEAAIAAAApAAAAAAAJAAMAAAApAAAAAAAJAAQAAAAKAAYAAAAIAAUAAAApAAAAAAAHAAUAAAApAAAAAAAGAAUAAAApAAAAAAAFAAUAAAApAAAAAAAFAAQAAAApAAAAAAAFAAEAAAApAAAAAAAIAAMAAAApAAAAAAAHAAMAAAApAAAAAAAHAAQAAAApAAAAAAAGAAQAAAApAAAAAAAEAAQAAAApAAAAAAAIAAEAAAApAAAAAAAKAAIAAAApAAAAAAAIAAQAAAAKAAYAAAADAAEAAAApAAAAAAAEAAEAAAApAAAAAAACAAEAAAApAAAAAAABAAEAAAApAAAAAAAAAAEAAAApAAAAAAAAAAIAAAApAAAAAAAAAAMAAAApAAAAAAAAAAQAAAApAAAAAAAAAAUAAAApAAAAAAAAAAYAAAApAAAAAAAAAAcAAAApAAAAAAAAAAgAAAApAAAAAAABAAgAAAApAAAAAAABAAcAAAApAAAAAAABAAYAAAApAAAAAAABAAUAAAApAAAAAAABAAQAAAApAAAAAAABAAMAAAApAAAAAAABAAIAAAApAAAAAAACAAgAAAApAAAAAAACAAcAAAApAAAAAAACAAYAAAApAAAAAAADAAUAAAApAAAAAAADAAQAAAApAAAAAAAEAAUAAAApAAAAAAAFAAYAAAApAAAAAAAFAAcAAAApAAAAAAAEAAcAAAApAAAAAAAEAAgAAAApAAAAAAADAAgAAAApAAAAAAADAAkAAAApAAAAAAACAAUAAAApAAAAAAACAAQAAAApAAAAAAADAAYAAAApAAAAAAADAAcAAAApAAAAAAAEAAYAAAApAAAAAAAGAAYAAAApAAAAAAAGAAcAAAApAAAAAAAFAAgAAAApAAAAAAAHAAYAAAApAAAAAAAIAAcAAAApAAAAAAAJAAcAAAApAAAAAAAJAAgAAAApAAAAAAAIAAgAAAApAAAAAAAIAAkAAAApAAAAAAAHAAkAAAApAAAAAAAGAAkAAAAKAAYAAAAFAAkAAAApAAAAAAAJAAYAAAApAAAAAAAKAAYAAAApAAAAAAALAAYAAAApAAAAAAAMAAcAAAApAAAAAAANAAcAAAApAAAAAAAMAAgAAAApAAAAAAALAAkAAAApAAAAAAAKAAkAAAApAAAAAAAJAAkAAAApAAAAAAAHAAgAAAApAAAAAAAIAAYAAAApAAAAAAAMAAYAAAApAAAAAAANAAYAAAApAAAAAAAOAAcAAAApAAAAAAAOAAgAAAApAAAAAAANAAgAAAApAAAAAAAGAAgAAAAPAAoAAAALAAcAAAApAAAAAAAPAAgAAAApAAAAAAAQAAgAAAApAAAAAAAPAAkAAAApAAAAAAAOAAkAAAApAAAAAAANAAkAAAApAAAAAAAMAAkAAAApAAAAAAAKAAgAAAApAAAAAAAKAAcAAAApAAAAAAALAAgAAAApAAAAAAAMAAAAAAApAAAAAAALAAAAAAApAAAAAAAKAAAAAAApAAAAAAAKAAEAAAApAAAAAAALAAEAAAApAAAAAAAMAAEAAAApAAAAAAANAAEAAAApAAAAAAAOAAEAAAApAAAAAAAPAAEAAAApAAAAAAAPAAIAAAApAAAAAAAOAAIAAAApAAAAAAANAAIAAAApAAAAAAAMAAIAAAApAAAAAAALAAIAAAApAAAAAAAHAAcAAAApAAAAAAABAAkAAAApAAAAAAAAAAkAAAApAAAAAAAAAAoAAAApAAAAAAAFAAoAAAApAAAAAAAFAAsAAAApAAAAAAAEAAsAAAApAAAAAAADAAsAAAApAAAAAAADAAoAAAApAAAAAAAEAAkAAAApAAAAAAAEAAoAAAApAAAAAAACAAsAAAApAAAAAAABAAsAAAApAAAAAAACAAkAAAApAAAAAAADAAwAAAApAAAAAAACAAwAAAApAAAAAAACAAoAAAApAAAAAAABAAoAAAApAAAAAAAAAAsAAAApAAAAAAAAAAwAAAApAAAAAAABAAwAAAApAAAAAAAEAAwAAAApAAAAAAAFAAwAAAApAAAAAAAGAAwAAAApAAAAAAAHAAwAAAApAAAAAAAIAAwAAAApAAAAAAAJAAwAAAApAAAAAAATAAAAAAApAAAAAAASAAAAAAApAAAAAAARAAAAAAApAAAAAAAQAAAAAAApAAAAAAAPAAAAAAApAAAAAAAOAAAAAAApAAAAAAAQAAEAAAApAAAAAAARAAEAAAApAAAAAAASAAEAAAApAAAAAAATAAIAAAApAAAAAAANAAAAAAApAAAAAAATAAEAAAApAAAAAAATAAMAAAApAAAAAAASAAMAAAApAAAAAAARAAMAAAApAAAAAAAQAAMAAAApAAAAAAAQAAIAAAApAAAAAAARAAIAAAApAAAAAAASAAIAAAApAAAAAAAPAAMAAAApAAAAAAAOAAMAAAApAAAAAAATAAQAAAApAAAAAAATAAUAAAApAAAAAAASAAQAAAApAAAAAAARAAQAAAApAAAAAAASAAUAAAApAAAAAAATAAYAAAApAAAAAAATAAcAAAApAAAAAAASAAYAAAApAAAAAAARAAUAAAApAAAAAAAQAAUAAAApAAAAAAASAAcAAAApAAAAAAASAAgAAAApAAAAAAARAAgAAAApAAAAAAAQAAkAAAApAAAAAAAPAAcAAAApAAAAAAAMAAUAAAAKAAYAAAANAAUAAAApAAAAAAANAAQAAAAKAAYAAAAOAAQAAAApAAAAAAAPAAQAAAApAAAAAAARAAYAAAApAAAAAAAQAAYAAAApAAAAAAAPAAYAAAApAAAAAAAKAAUAAAAKAAYAAAAOAAUAAAApAAAAAAARAAcAAAApAAAAAAAJAAUAAAAKAAYAAAALAAUAAAAKAAYAAAAOAAYAAAApAAAAAAAPAAUAAAApAAAAAAAQAAcAAAApAAAAAAAMAAoAAAApAAAAAAAMAAsAAAApAAAAAAALAAsAAAApAAAAAAAKAAwAAAApAAAAAAAGAAoAAAAKAAYAAAAHAAoAAAApAAAAAAAIAAoAAAApAAAAAAAJAAsAAAApAAAAAAAKAAsAAAApAAAAAAAGAAsAAAAKAAYAAAAJAAoAAAApAAAAAAAKAAoAAAApAAAAAAALAAoAAAApAAAAAAANAAoAAAApAAAAAAAOAAoAAAApAAAAAAAPAAoAAAApAAAAAAAQAAoAAAApAAAAAAAQAAsAAAApAAAAAAAPAAsAAAApAAAAAAAOAAsAAAApAAAAAAANAAsAAAApAAAAAAAIAAsAAAApAAAAAAAHAAsAAAApAAAAAAATAAwAAAApAAAAAAASAAsAAAApAAAAAAARAAoAAAApAAAAAAARAAkAAAApAAAAAAAMAAQAAAAKAAYAAAASAAoAAAApAAAAAAASAAwAAAApAAAAAAASAAkAAAApAAAAAAATAAgAAAApAAAAAAATAAsAAAApAAAAAAATAAoAAAApAAAAAAATAAkAAAApAAAAAAARAAwAAAApAAAAAAAQAAwAAAApAAAAAAAPAAwAAAApAAAAAAAOAAwAAAApAAAAAAANAAwAAAApAAAAAAAMAAwAAAApAAAAAAALAAwAAAApAAAAAAARAAsAAAApAAAAAAAAAA4AAAApAAAAAAABAA4AAAApAAAAAAACAA4AAAApAAAAAAAGAA4AAAApAAAAAAAHAA4AAAApAAAAAAAIAA4AAAApAAAAAAAJAA4AAAApAAAAAAAKAA4AAAApAAAAAAAQAA4AAAApAAAAAAARAA4AAAApAAAAAAAPAA4AAAApAAAAAAAOAA4AAAApAAAAAAANAA4AAAApAAAAAAAMAA4AAAApAAAAAAAMAA0AAAApAAAAAAALAA0AAAApAAAAAAAKAA0AAAApAAAAAAALAA4AAAApAAAAAAASAA4AAAApAAAAAAASAA0AAAApAAAAAAATAA4AAAApAAAAAAATAA0AAAApAAAAAAARAA0AAAApAAAAAAAQAA0AAAApAAAAAAAPAA0AAAApAAAAAAAOAA0AAAApAAAAAAANAA0AAAApAAAAAAAEAA0AAAApAAAAAAADAA0AAAApAAAAAAACAA0AAAApAAAAAAABAA0AAAApAAAAAAAFAA0AAAApAAAAAAAGAA0AAAApAAAAAAAHAA0AAAApAAAAAAAIAA0AAAApAAAAAAAJAA0AAAApAAAAAAAAAA0AAAApAAAAAAAFAA4AAAApAAAAAAAEAA4AAAApAAAAAAADAA4AAAApAAAAAAAKAAQAAAAKAAYAAAALAAQAAAAKAAYAAAAKAAMAAAApAAAAAAALAAMAAAApAAAAAAAMAAMAAAApAAAAAAANAAMAAAApAAAAAAAQAAQAAAApAAAAAAA=")
tile_set = SubResource("TileSet_dya6d")

[node name="Cutscenes" type="Node2D" parent="."]
script = ExtResource("4_a3cje")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Cutscenes"]
libraries = {
&"": SubResource("AnimationLibrary_uufvl")
}

[node name="PNJ_Immobile" parent="." instance=ExtResource("6_uufvl")]
position = Vector2(169, 112)
timeline = "dial_test"

[node name="PNJ_Manager" type="Node2D" parent="."]
script = ExtResource("6_grxwr")
pnj_quantity = 1

[node name="Middle_Targets" type="Node2D" parent="PNJ_Manager"]

[node name="Target1" type="Marker2D" parent="PNJ_Manager/Middle_Targets"]
position = Vector2(203, 121)

[node name="Target2" type="Marker2D" parent="PNJ_Manager/Middle_Targets"]
position = Vector2(145, 189)

[node name="Target3" type="Marker2D" parent="PNJ_Manager/Middle_Targets"]
position = Vector2(276, 124)

[node name="End_Targets" type="Node2D" parent="PNJ_Manager"]

[node name="Target1" type="Marker2D" parent="PNJ_Manager/End_Targets"]
position = Vector2(60, 31)

[node name="Target2" type="Marker2D" parent="PNJ_Manager/End_Targets"]
position = Vector2(22, 204)

[connection signal="animation_finished" from="Cutscenes/AnimationPlayer" to="Cutscenes" method="cutscene_end"]
